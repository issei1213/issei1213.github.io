<!doctype html><html lang=ja-jp>
<head>
<meta name=generator content="Hugo 0.91.2"><title>
TechBlog</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name=description content="技術ブログ">
<meta property="og:image" content="https://issei1213.github.io/img/logo.png">
<meta name=twitter:card content="summary">
<meta property="og:title" content="TechBlog">
<meta property="og:description" content="技術ブログ">
<meta property="og:type" content="website">
<meta property="og:url" content="https://issei1213.github.io/">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="TechBlog">
<meta name=twitter:description content="技術ブログ">
<meta itemprop=name content="TechBlog">
<meta itemprop=description content="技術ブログ">
<link rel=canonical href=https://issei1213.github.io/>
<link rel=icon type=image/png href=https://issei1213.github.io/img/favicon.png>
<link rel=stylesheet href=/css/font-awesome.min.css>
<link rel=stylesheet href=/css/bulma.min.css>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','G-3WPQ6FJXBQ','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
<script src=/js/ramium.js></script>
<link rel=stylesheet href=/css/ramium.css>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3WPQ6FJXBQ"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config',"G-3WPQ6FJXBQ")</script>
</head>
<body><nav class="navbar is-dark" role=navigation aria-label="main navigation">
<div class=navbar-brand>
<a class=navbar-item href=/>
<strong>TechBlog </strong>
</a>
<a role=button class="navbar-burger burger" aria-label=menu aria-expanded=false data-target=navbarBasicExample>
<span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span>
</a>
</div>
<div id=navbarBasicExample class=navbar-menu>
<div class=navbar-start>
<a class=navbar-item href=/>ホーム</a>
<div class="navbar-item has-dropdown is-hoverable">
<a class=navbar-link>ブログ</a>
<div class=navbar-dropdown>
<a class=navbar-item href=/tags/>タグ</a>
<a class=navbar-item href=/posts/>記事</a>
</div>
</div>
</div>
<div class=navbar-end>
<a class="navbar-item navgithub" href=https://github.com/issei1213 target=_blank>
<i class="fa fa-github fa-2x"></i>
</a>
<a class="navbar-item navgithub" href=https://twitter.com/abIOELEsEfu6Os0 target=_blank>
<i class="fa brands fa-twitter fa-2x"></i>
</a>
</div>
</div>
</nav>
<section class="hero has-text-centered">
<div class=hero-body>
<div class=container>
<h1 class="title is-2">
TechBlog
</h1>
</div>
</div>
</section>
<div class="columns is-centered has-text-centered">
<div class="column is-10">
<div class=content>
<p class=tags-summary>
<a href=/tags/pm>
<span class="tag is-dark is-large is-rounded">
Pm
</span>
</a>
<a href=/tags/react>
<span class="tag is-dark is-large is-rounded">
React
</span>
</a>
<a href=/tags/solidjs>
<span class="tag is-dark is-large is-rounded">
Solidjs
</span>
</a>
<a href=/tags/typescript>
<span class="tag is-dark is-large is-rounded">
Typescript
</span>
</a>
<a href=/tags/vue.js>
<span class="tag is-dark is-large is-rounded">
Vue.js
</span>
</a>
<a href=/tags/%E9%80%B11%E3%82%86%E3%82%8B%E3%82%A2%E3%82%A6%E3%83%88%E3%83%97%E3%83%83%E3%83%88>
<span class="tag is-dark is-large is-rounded">
週1ゆるアウトプット
</span>
</a>
</p>
</div>
</div>
</div>
<br>
<div class="columns is-centered">
<div class="column is-7">
<div class=blog-brief>
<a href=/posts/readable-testing-code/>
<h3 class="title is-4">
Jestのリーダブルテストコード
</h3>
</a>
<div class="level is-mobile details">
<div class=level-left>
<div class=level-item>
<a href=/posts/readable-testing-code/>
<p class="subtitle info date">May 29, 2023
</p>
</a>
</div>
<div class=level-item>
<a href=/posts/readable-testing-code/>
<p class="subtitle info">
10 mins read
</p>
</a>
</div>
</div>
<div class="level-right is-hidden-touch">
<a class="tag is-rounded" href=/tags/%E9%80%B11%E3%82%86%E3%82%8B%E3%82%A2%E3%82%A6%E3%83%88%E3%83%97%E3%83%83%E3%83%88>週1ゆるアウトプット</a>
</div>
</div>
<div>
<div>
<a href=/posts/readable-testing-code/>
<p class=summary>
背景 今週、社内のメンバーから以下のリーダブルテストコードの記事を見せてもらった。 かなり自分の中でささったので、Jestの場合どうするかを考えてみた
リーダブルテストコード
過度なDRYを行わず、APIドキュメントだと思って書く 脳内メモリを消費させない“リーダブルなテストコード”の書き方
概要 上記の参考記事を参考に、Jest(React)の場合、どのようにリーダブルテストコードを書くかを考えてみた。 今回は、UIコンポーネントとカスタムHookそれぞれのテストコードを書いていく。
本題 参考の記事にはリーダブルテストコードを書くには、以下の様に書く必要がある記載している
テストコードにおいて、過度なDRYは読みやすさの敵 賢くてロジカルなテストコードより、誰でも(非エンジニアでも)読める愚直なテストコードを 脳内メモリを使わないテストコードはリーダブル 変数をなくし、上から順番に見るだけでテストの意図がわかるようにする 実行可能なAPIドキュメントだと思ってテストコードを書こう(テストコードはプログラムじゃなくてドキュメント) もっとリーダブルにするコツ
実際のユースケースに近いテストデータを使用する 「あああ」「テストテスト」「ユーザー１」みたいなテストデータはNG describe / context / itの説明を丁寧に書く 「it “適切な値を返す”」みたいな具体性のない説明はNG すべての情報が1画面に収まるテストコードが理想 上下スクロールが頻繁に発生したり、他のファイルが見に行かなきゃいけないのはNG DRY禁止はあくまで原則。適宜メリット・デメリットを天秤にかける。 「明確なメリットがあるDRY」や「可読性の損なわない抽象化」まで放棄するのはNG 上記を考慮して、React(Jest)のテストケースを書いていく
UIコンポーネントテスト テスト対象コンポーネント inputタグで入力した値firstNameとlastNameが、pタグで表示されるようになっている。
// @ref: https://react.dev/learn/reusing-logic-with-custom-hooks#custom-hooks-let-you-share-stateful-logic-not-state-itself import { useFormInput } from './useFormInput'; export const Form = () => { const firstNameProps = useFormInput(''); const lastNameProps = useFormInput(''); return ( &lt;> &lt;label> First name: &lt;input type='text' name='firstName' {.
</p>
</a>
</div>
</div>
<div class="level is-mobile continue-reading">
<div class=level-left>
</div>
<div class=level-right>
<a href=/posts/readable-testing-code/>続きを読む <i class="fa fa-angle-double-right" aria-hidden=true></i></a>
</div>
</div>
<hr>
</div><div class=blog-brief>
<a href=/posts/testing-library_getbyrole/>
<h3 class="title is-4">
Testing Libraryで暗黙的なロールを使用したDOMの取得方法
</h3>
</a>
<div class="level is-mobile details">
<div class=level-left>
<div class=level-item>
<a href=/posts/testing-library_getbyrole/>
<p class="subtitle info date">May 21, 2023
</p>
</a>
</div>
<div class=level-item>
<a href=/posts/testing-library_getbyrole/>
<p class="subtitle info">
4 mins read
</p>
</a>
</div>
</div>
<div class="level-right is-hidden-touch">
<a class="tag is-rounded" href=/tags/%E9%80%B11%E3%82%86%E3%82%8B%E3%82%A2%E3%82%A6%E3%83%88%E3%83%97%E3%83%83%E3%83%88>週1ゆるアウトプット</a>
</div>
</div>
<div>
<div>
<a href=/posts/testing-library_getbyrole/>
<p class=summary>
背景 現在以下の書籍でフロントのテストを学習しているので、勉強になったDOMの取得方法をまとめる。 書籍通り、ReactのUIコンポーネントのテスト方法を記載していく。
概要 ReactのUIコンポーネントのDOMを取得する方法で、暗黙的なロールを活用した取得方法があったので、まとめていく
本題 以下のコンポーネントのテストをしていく。
import {ReactNode} from "react"; export const Heading = ({children}: {children: ReactNode}) => { return ( &lt;h1>{children}&lt;/h1> ); }; 今回は簡易的に、propsの値がh1タグで表示されているかをテストしていく。
import {render, screen} from "@testing-library/react"; import {Heading} from "./Heading"; test('propsが値がh1タグに存在していること', () => { render(&lt;Heading>test&lt;/Heading>) expect(screen.getByRole('heading', {name: 'test'})).toBeInTheDocument() }) 上記のgetByRoleの第一引数にheadingを指定しているが、h1タグの暗黙的なロールがheadingであるため、headingを指定している。
このように暗黙的なロールをうまく使えば、test-idみたいなカスタム属性をなどを使用せずに、テストをかくことができる。 また、Testing Libraryも公式も暗黙的なロールを使用することを推奨している。
暗黙的なルール一覧はこちらから確認ができる。
※上記はaria-queryというライブラリのドキュメントであるが、Testing Libraryのライブラリは内部的に依存するので、上記を参考にしても問題ない
まとめ UIコンポーネントのテストをする際は、暗黙的なロールを使用することで、テストを書きやすくなるので、ぜひ活用していきたい。
参考文献 Testing Library
暗黙的なルール一覧(aria-query)
フロントエンド開発のためのテスト入門 今からでも知っておきたい自動テスト戦略の必須知識
</p>
</a>
</div>
</div>
<div class="level is-mobile continue-reading">
<div class=level-left>
</div>
<div class=level-right>
<a href=/posts/testing-library_getbyrole/>続きを読む <i class="fa fa-angle-double-right" aria-hidden=true></i></a>
</div>
</div>
<hr>
</div><div class=blog-brief>
<a href=/posts/which_use_getxxx_or_createxxx/>
<h3 class="title is-4">
関数命名について GetXXX と CreateXXX の違い
</h3>
</a>
<div class="level is-mobile details">
<div class=level-left>
<div class=level-item>
<a href=/posts/which_use_getxxx_or_createxxx/>
<p class="subtitle info date">May 14, 2023
</p>
</a>
</div>
<div class=level-item>
<a href=/posts/which_use_getxxx_or_createxxx/>
<p class="subtitle info">
4 mins read
</p>
</a>
</div>
</div>
<div class="level-right is-hidden-touch">
<a class="tag is-rounded" href=/tags/%E9%80%B11%E3%82%86%E3%82%8B%E3%82%A2%E3%82%A6%E3%83%88%E3%83%97%E3%83%83%E3%83%88>週1ゆるアウトプット</a>
</div>
</div>
<div>
<div>
<a href=/posts/which_use_getxxx_or_createxxx/>
<p class=summary>
背景 現在の参画している案件で「週1ゆるアウトプット」という名前でアウトプットしている方がいたので、自分も真似してみようと思う。
今回は、コードを書いていてふと気になったことがあったので、簡単にまとめていく。
概要 戻り地がある関数を命名するときに、createXXXとgetXXXのどちらを使うか迷ったので、まとめていく。
本題 以下はサンプルコードを記載する。 名前のフルネームを作成する関数である。
createFullNameとgetFullNameのどちらが適切かをまとめていく。
// 1. createXXX const createFullName = (firstName: string, lastName: string): string => { return `${firstName}${lastName}` } // 2. getXXX const getFullName = (firstName: string, lastName: string): string => { return `${firstName}${lastName}` } ポイントとしては、getXXXは通常、既存のデータやリソースを取得するときに使用することを想定すること。
createXXXは新しいデータを作成するときに使用する。
なので、今回の場合は、既存のデータやリソースを取得するわけではないので、createXXXを使用するのが適切だと判断。
getXXXを使ったサンプルは以下
ユーザー情報を取得する場合 const getUserInfo = (userId: string) => { // ユーザー情報を取得するロジック }; 配列から特定の要素を取得する場合 const getElementAtIndex = (array: string[], index: number) => { return array[index]; }; オブジェクトのプロパティ値を取得する関数 const getPropertyValue = (object: Object, propertyName: string) => { return object[propertyName]; }; まとめ 今回は、関数の命名についてcreateXXXとgetXXXのどちらを使うか迷ったので、まとめてみた。 getXXXは通常、既存のデータやリソースを取得するときに使用することを想定すること。
</p>
</a>
</div>
</div>
<div class="level is-mobile continue-reading">
<div class=level-left>
</div>
<div class=level-right>
<a href=/posts/which_use_getxxx_or_createxxx/>続きを読む <i class="fa fa-angle-double-right" aria-hidden=true></i></a>
</div>
</div>
<hr>
</div><div class=blog-brief>
<a href=/posts/solidjs_types/>
<h3 class="title is-4">
Component TypesとEvent Handlers
</h3>
</a>
<div class="level is-mobile details">
<div class=level-left>
<div class=level-item>
<a href=/posts/solidjs_types/>
<p class="subtitle info date">Aug 12, 2022
</p>
</a>
</div>
<div class=level-item>
<a href=/posts/solidjs_types/>
<p class="subtitle info">
7 mins read
</p>
</a>
</div>
</div>
<div class="level-right is-hidden-touch">
<a class="tag is-rounded" href=/tags/solidjs>SolidJS</a>
<a class="tag is-rounded" href=/tags/typescript>TypeScript</a>
</div>
</div>
<div>
<div>
<a href=/posts/solidjs_types/>
<p class=summary>
背景 SolidJSのコンポーネントとイベントハンドラの型定義について悩んでいたが、公式で解説が乗っていたので、
個人的にまとめることにする。
概要 コンポーネントとイベントハンドラの型定義の方法をまとめていく。
公式ではコンポーネントの型をComponent Types、エベントハンドラの型をEvent Handlersとして記載しているので、 同一の単語を使用していく。
本題 Component Types Component import type { JSX, Component } from 'solid-js'; type Component&lt;P = {}> = (props: P) => JSX.Element; 基本的にはReactのFCと同じような使い型ができ、propsの型をジェネリクスで定義することができる。
戻り値はJSX.Elementになる。
サンプルコード　※公式のコードを参照
import { render } from "solid-js/web"; import { createSignal, Component } from "solid-js"; const Counter: Component = () => { const [count, setCount] = createSignal(0); return ( &lt;button onClick={() => setCount((c) => c+1)}> {count()} &lt;/button> ); }; const InitCounter: Component&lt;{initial: number}> = (props) => { const [count, setCount] = createSignal(props.
</p>
</a>
</div>
</div>
<div class="level is-mobile continue-reading">
<div class=level-left>
</div>
<div class=level-right>
<a href=/posts/solidjs_types/>続きを読む <i class="fa fa-angle-double-right" aria-hidden=true></i></a>
</div>
</div>
<hr>
</div><div class=blog-brief>
<a href=/posts/typescript_tip-20/>
<h3 class="title is-4">
TypeScript Tip #20
</h3>
</a>
<div class="level is-mobile details">
<div class=level-left>
<div class=level-item>
<a href=/posts/typescript_tip-20/>
<p class="subtitle info date">Apr 20, 2022
</p>
</a>
</div>
<div class=level-item>
<a href=/posts/typescript_tip-20/>
<p class="subtitle info">
8 mins read
</p>
</a>
</div>
</div>
<div class="level-right is-hidden-touch">
<a class="tag is-rounded" href=/tags/typescript>TypeScript</a>
</div>
</div>
<div>
<div>
<a href=/posts/typescript_tip-20/>
<p class=summary>
背景 今回もmattさんのTypeScriptTipsを解説していく。
TypeScript Tip #20
概要 以下のオブジェクトの型が存在している時に、特定のキーのバリューのユニオンを作成する時に使用する。
export type Obj = { a: 'a', a2: 'a2', a3: 'a3', b: 'b', b1: 'b1', b2: 'b2' } // 上記の型から以下の型を作成したい type NewUnion = "a" | "a2" | "a3" 本題 以下が実際の型定義になる。順番に解説していく。
type ValuesOfKeysStartingWithA&lt;Obj> = { [K in Extract&lt;keyof Obj, `a${string}`>]: Obj[K]; }[Extract&lt;keyof Obj, `a${string}`>] type NewUnion = ValuesOfKeysStartingWithA&lt;Obj> // type NewUnion = "a" | "a2" | "a3" 今回のポイントはExtract&lt;keyof Obj,`a${string}`>になるため細かくみていく。 まず、a${string}がどのように型定義されるかというと、文字列aを含めて文字列リテラル型を定義できる。 type TestType = `a${string}` // Success const test1: TestType = 'a' const test2: TestType = 'a1' // Error const test3: TestType = '1' // Type '"1"' is not assignable to type '`a${string}`'.
</p>
</a>
</div>
</div>
<div class="level is-mobile continue-reading">
<div class=level-left>
</div>
<div class=level-right>
<a href=/posts/typescript_tip-20/>続きを読む <i class="fa fa-angle-double-right" aria-hidden=true></i></a>
</div>
</div>
<hr>
</div>
<div class=content>
<a href=/posts/>
<h4 class="has-text-centered seeall">全てを見る</h4>
</a>
</div>
</div>
</div>
<footer class="footer has-background-dark">
<div class="content has-text-centered has-text-white">
<p>© 2022 issei1213 All rights reserved.</p>
</div>
</footer>
</body>
</html>