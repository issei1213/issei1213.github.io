<!doctype html><html lang=ja-jp>
<head><title>
Jestのリーダブルテストコード |
TechBlog</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name=description content="背景 今週、社内のメンバーから以下のリーダブルテストコードの記事を見せてもらった。 かなり自分の中でささったので、Jestの場合どうするかを考えてみた
リーダブルテストコード
過度なDRYを行わず、APIドキュメントだと思って書く 脳内メモリを消費させない“リーダブルなテストコード”の書き方
 概要 上記の参考記事を参考に、Jest(React)の場合、どのようにリーダブルテストコードを書くかを考えてみた。 今回は、UIコンポーネントとカスタムHookそれぞれのテストコードを書いていく。
 本題 参考の記事にはリーダブルテストコードを書くには、以下の様に書く必要がある記載している
  テストコードにおいて、過度なDRYは読みやすさの敵 賢くてロジカルなテストコードより、誰でも(非エンジニアでも)読める愚直なテストコードを 脳内メモリを使わないテストコードはリーダブル  変数をなくし、上から順番に見るだけでテストの意図がわかるようにする   実行可能なAPIドキュメントだと思ってテストコードを書こう(テストコードはプログラムじゃなくてドキュメント)   もっとリーダブルにするコツ
  実際のユースケースに近いテストデータを使用する  「あああ」「テストテスト」「ユーザー１」みたいなテストデータはNG   describe / context / itの説明を丁寧に書く  「it &ldquo;適切な値を返す&rdquo;」みたいな具体性のない説明はNG   すべての情報が1画面に収まるテストコードが理想  上下スクロールが頻繁に発生したり、他のファイルが見に行かなきゃいけないのはNG   DRY禁止はあくまで原則。適宜メリット・デメリットを天秤にかける。  「明確なメリットがあるDRY」や「可読性の損なわない抽象化」まで放棄するのはNG     上記を考慮して、React(Jest)のテストケースを書いていく
UIコンポーネントテスト テスト対象コンポーネント inputタグで入力した値firstNameとlastNameが、pタグで表示されるようになっている。
// @ref: https://react.dev/learn/reusing-logic-with-custom-hooks#custom-hooks-let-you-share-stateful-logic-not-state-itself import { useFormInput } from './useFormInput'; export const Form = () => { const firstNameProps = useFormInput(''); const lastNameProps = useFormInput(''); return ( <> <label> First name: <input type='text' name='firstName' {.
    ">
<meta property="og:image" content="https://issei1213.github.io/img/logo.png">
<meta name=twitter:card content="summary">
<meta property="og:title" content="Jestのリーダブルテストコード">
<meta property="og:description" content="背景 今週、社内のメンバーから以下のリーダブルテストコードの記事を見せてもらった。 かなり自分の中でささったので、Jestの場合どうするかを考えてみた
リーダブルテストコード
過度なDRYを行わず、APIドキュメントだと思って書く 脳内メモリを消費させない“リーダブルなテストコード”の書き方
 概要 上記の参考記事を参考に、Jest(React)の場合、どのようにリーダブルテストコードを書くかを考えてみた。 今回は、UIコンポーネントとカスタムHookそれぞれのテストコードを書いていく。
 本題 参考の記事にはリーダブルテストコードを書くには、以下の様に書く必要がある記載している
  テストコードにおいて、過度なDRYは読みやすさの敵 賢くてロジカルなテストコードより、誰でも(非エンジニアでも)読める愚直なテストコードを 脳内メモリを使わないテストコードはリーダブル  変数をなくし、上から順番に見るだけでテストの意図がわかるようにする   実行可能なAPIドキュメントだと思ってテストコードを書こう(テストコードはプログラムじゃなくてドキュメント)   もっとリーダブルにするコツ
  実際のユースケースに近いテストデータを使用する  「あああ」「テストテスト」「ユーザー１」みたいなテストデータはNG   describe / context / itの説明を丁寧に書く  「it &ldquo;適切な値を返す&rdquo;」みたいな具体性のない説明はNG   すべての情報が1画面に収まるテストコードが理想  上下スクロールが頻繁に発生したり、他のファイルが見に行かなきゃいけないのはNG   DRY禁止はあくまで原則。適宜メリット・デメリットを天秤にかける。  「明確なメリットがあるDRY」や「可読性の損なわない抽象化」まで放棄するのはNG     上記を考慮して、React(Jest)のテストケースを書いていく
UIコンポーネントテスト テスト対象コンポーネント inputタグで入力した値firstNameとlastNameが、pタグで表示されるようになっている。
// @ref: https://react.dev/learn/reusing-logic-with-custom-hooks#custom-hooks-let-you-share-stateful-logic-not-state-itself import { useFormInput } from './useFormInput'; export const Form = () => { const firstNameProps = useFormInput(''); const lastNameProps = useFormInput(''); return ( <> <label> First name: <input type='text' name='firstName' {.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://issei1213.github.io/posts/readable-testing-code/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2023-05-29T02:00:03+09:00">
<meta property="article:modified_time" content="2023-05-29T02:00:03+09:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Jestのリーダブルテストコード">
<meta name=twitter:description content="背景 今週、社内のメンバーから以下のリーダブルテストコードの記事を見せてもらった。 かなり自分の中でささったので、Jestの場合どうするかを考えてみた
リーダブルテストコード
過度なDRYを行わず、APIドキュメントだと思って書く 脳内メモリを消費させない“リーダブルなテストコード”の書き方
 概要 上記の参考記事を参考に、Jest(React)の場合、どのようにリーダブルテストコードを書くかを考えてみた。 今回は、UIコンポーネントとカスタムHookそれぞれのテストコードを書いていく。
 本題 参考の記事にはリーダブルテストコードを書くには、以下の様に書く必要がある記載している
  テストコードにおいて、過度なDRYは読みやすさの敵 賢くてロジカルなテストコードより、誰でも(非エンジニアでも)読める愚直なテストコードを 脳内メモリを使わないテストコードはリーダブル  変数をなくし、上から順番に見るだけでテストの意図がわかるようにする   実行可能なAPIドキュメントだと思ってテストコードを書こう(テストコードはプログラムじゃなくてドキュメント)   もっとリーダブルにするコツ
  実際のユースケースに近いテストデータを使用する  「あああ」「テストテスト」「ユーザー１」みたいなテストデータはNG   describe / context / itの説明を丁寧に書く  「it &ldquo;適切な値を返す&rdquo;」みたいな具体性のない説明はNG   すべての情報が1画面に収まるテストコードが理想  上下スクロールが頻繁に発生したり、他のファイルが見に行かなきゃいけないのはNG   DRY禁止はあくまで原則。適宜メリット・デメリットを天秤にかける。  「明確なメリットがあるDRY」や「可読性の損なわない抽象化」まで放棄するのはNG     上記を考慮して、React(Jest)のテストケースを書いていく
UIコンポーネントテスト テスト対象コンポーネント inputタグで入力した値firstNameとlastNameが、pタグで表示されるようになっている。
// @ref: https://react.dev/learn/reusing-logic-with-custom-hooks#custom-hooks-let-you-share-stateful-logic-not-state-itself import { useFormInput } from './useFormInput'; export const Form = () => { const firstNameProps = useFormInput(''); const lastNameProps = useFormInput(''); return ( <> <label> First name: <input type='text' name='firstName' {.">
<meta itemprop=name content="Jestのリーダブルテストコード">
<meta itemprop=description content="背景 今週、社内のメンバーから以下のリーダブルテストコードの記事を見せてもらった。 かなり自分の中でささったので、Jestの場合どうするかを考えてみた
リーダブルテストコード
過度なDRYを行わず、APIドキュメントだと思って書く 脳内メモリを消費させない“リーダブルなテストコード”の書き方
 概要 上記の参考記事を参考に、Jest(React)の場合、どのようにリーダブルテストコードを書くかを考えてみた。 今回は、UIコンポーネントとカスタムHookそれぞれのテストコードを書いていく。
 本題 参考の記事にはリーダブルテストコードを書くには、以下の様に書く必要がある記載している
  テストコードにおいて、過度なDRYは読みやすさの敵 賢くてロジカルなテストコードより、誰でも(非エンジニアでも)読める愚直なテストコードを 脳内メモリを使わないテストコードはリーダブル  変数をなくし、上から順番に見るだけでテストの意図がわかるようにする   実行可能なAPIドキュメントだと思ってテストコードを書こう(テストコードはプログラムじゃなくてドキュメント)   もっとリーダブルにするコツ
  実際のユースケースに近いテストデータを使用する  「あああ」「テストテスト」「ユーザー１」みたいなテストデータはNG   describe / context / itの説明を丁寧に書く  「it &ldquo;適切な値を返す&rdquo;」みたいな具体性のない説明はNG   すべての情報が1画面に収まるテストコードが理想  上下スクロールが頻繁に発生したり、他のファイルが見に行かなきゃいけないのはNG   DRY禁止はあくまで原則。適宜メリット・デメリットを天秤にかける。  「明確なメリットがあるDRY」や「可読性の損なわない抽象化」まで放棄するのはNG     上記を考慮して、React(Jest)のテストケースを書いていく
UIコンポーネントテスト テスト対象コンポーネント inputタグで入力した値firstNameとlastNameが、pタグで表示されるようになっている。
// @ref: https://react.dev/learn/reusing-logic-with-custom-hooks#custom-hooks-let-you-share-stateful-logic-not-state-itself import { useFormInput } from './useFormInput'; export const Form = () => { const firstNameProps = useFormInput(''); const lastNameProps = useFormInput(''); return ( <> <label> First name: <input type='text' name='firstName' {."><meta itemprop=datePublished content="2023-05-29T02:00:03+09:00">
<meta itemprop=dateModified content="2023-05-29T02:00:03+09:00">
<meta itemprop=wordCount content="240">
<meta itemprop=keywords content="週1ゆるアウトプット,">
<link rel=canonical href=https://issei1213.github.io/posts/readable-testing-code/>
<link rel=icon type=image/png href=https://issei1213.github.io/img/favicon.png>
<link rel=stylesheet href=/css/font-awesome.min.css>
<link rel=stylesheet href=/css/bulma.min.css>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','G-3WPQ6FJXBQ','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
<script src=/js/ramium.js></script>
<link rel=stylesheet href=/css/ramium.css>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3WPQ6FJXBQ"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config',"G-3WPQ6FJXBQ")</script>
</head>
<body><nav class="navbar is-dark" role=navigation aria-label="main navigation">
<div class=navbar-brand>
<a class=navbar-item href=/>
<strong>TechBlog </strong>
</a>
<a role=button class="navbar-burger burger" aria-label=menu aria-expanded=false data-target=navbarBasicExample>
<span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span>
</a>
</div>
<div id=navbarBasicExample class=navbar-menu>
<div class=navbar-start>
<a class=navbar-item href=/>ホーム</a>
<div class="navbar-item has-dropdown is-hoverable">
<a class=navbar-link>ブログ</a>
<div class=navbar-dropdown>
<a class=navbar-item href=/tags/>タグ</a>
<a class=navbar-item href=/posts/>記事</a>
</div>
</div>
</div>
<div class=navbar-end>
<a class="navbar-item navgithub" href=https://github.com/issei1213 target=_blank>
<i class="fa fa-github fa-2x"></i>
</a>
<a class="navbar-item navgithub" href=https://twitter.com/abIOELEsEfu6Os0 target=_blank>
<i class="fa brands fa-twitter fa-2x"></i>
</a>
</div>
</div>
</nav><div class="columns is-centered">
<div id=page-body class="column is-7">
<div class="content blog">
<h1>Jestのリーダブルテストコード</h1>
<div id=infobar class="level is-mobile">
<div class=level-left>
<div class=level-item>
<p class="subtitle info date">May 29, 2023
</p>
</div>
<div class=level-item>
<p class="subtitle info">
10 mins read
</p>
</div>
</div>
<div class="level-right is-hidden-touch">
<div class=tags>
<a class="tag is-dark is-rounded" href=/tags/%E9%80%B11%E3%82%86%E3%82%8B%E3%82%A2%E3%82%A6%E3%83%88%E3%83%97%E3%83%83%E3%83%88>週1ゆるアウトプット</a>
</div>
</div>
</div>
<div class="tags is-hidden-desktop">
<a class="tag is-dark is-rounded" href=/tags/%E9%80%B11%E3%82%86%E3%82%8B%E3%82%A2%E3%82%A6%E3%83%88%E3%83%97%E3%83%83%E3%83%88>週1ゆるアウトプット</a>
</div>
<div class=blog-text>
<h2 id=背景>背景</h2>
<p>今週、社内のメンバーから以下のリーダブルテストコードの記事を見せてもらった。
かなり自分の中でささったので、Jestの場合どうするかを考えてみた</p>
<p><a href=https://speakerdeck.com/jnchito/number-vstat target=_blank>リーダブルテストコード</a><br>
<a href=https://logmi.jp/tech/articles/327449 target=_blank>過度なDRYを行わず、APIドキュメントだと思って書く
脳内メモリを消費させない“リーダブルなテストコード”の書き方</a></p>
<hr>
<h2 id=概要>概要</h2>
<p>上記の参考記事を参考に、Jest(React)の場合、どのようにリーダブルテストコードを書くかを考えてみた。
今回は、UIコンポーネントとカスタムHookそれぞれのテストコードを書いていく。</p>
<hr>
<h2 id=本題>本題</h2>
<p>参考の記事にはリーダブルテストコードを書くには、以下の様に書く必要がある記載している</p>
<blockquote>
<ul>
<li>テストコードにおいて、過度なDRYは読みやすさの敵</li>
<li>賢くてロジカルなテストコードより、誰でも(非エンジニアでも)読める愚直なテストコードを</li>
<li>脳内メモリを使わないテストコードはリーダブル
<ul>
<li>変数をなくし、上から順番に見るだけでテストの意図がわかるようにする</li>
</ul>
</li>
<li>実行可能なAPIドキュメントだと思ってテストコードを書こう(テストコードはプログラムじゃなくてドキュメント)</li>
</ul>
</blockquote>
<p>もっとリーダブルにするコツ</p>
<blockquote>
<ul>
<li>実際のユースケースに近いテストデータを使用する
<ul>
<li>「あああ」「テストテスト」「ユーザー１」みたいなテストデータはNG</li>
</ul>
</li>
<li>describe / context / itの説明を丁寧に書く
<ul>
<li>「it &ldquo;適切な値を返す&rdquo;」みたいな具体性のない説明はNG</li>
</ul>
</li>
<li>すべての情報が1画面に収まるテストコードが理想
<ul>
<li>上下スクロールが頻繁に発生したり、他のファイルが見に行かなきゃいけないのはNG</li>
</ul>
</li>
<li>DRY禁止はあくまで原則。適宜メリット・デメリットを天秤にかける。
<ul>
<li>「明確なメリットがあるDRY」や「可読性の損なわない抽象化」まで放棄するのはNG</li>
</ul>
</li>
</ul>
</blockquote>
<p>上記を考慮して、React(Jest)のテストケースを書いていく</p>
<h3 id=uiコンポーネントテスト>UIコンポーネントテスト</h3>
<h4 id=テスト対象コンポーネント>テスト対象コンポーネント</h4>
<p><code>input</code>タグで入力した値<code>firstName</code>と<code>lastName</code>が、<code>p</code>タグで表示されるようになっている。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx>
<span style=color:#75715e>// @ref: https://react.dev/learn/reusing-logic-with-custom-hooks#custom-hooks-let-you-share-stateful-logic-not-state-itself
</span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useFormInput</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;./useFormInput&#39;</span>;

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>Form</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>firstNameProps</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useFormInput</span>(<span style=color:#e6db74>&#39;&#39;</span>);
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>lastNameProps</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useFormInput</span>(<span style=color:#e6db74>&#39;&#39;</span>);

    <span style=color:#66d9ef>return</span> (
        &lt;&gt;
            &lt;<span style=color:#f92672>label</span>&gt;
                <span style=color:#a6e22e>First</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span>
                &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;text&#39;</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;firstName&#39;</span> {<span style=color:#a6e22e>...firstNameProps</span>} /&gt;
            &lt;/<span style=color:#f92672>label</span>&gt;
            &lt;<span style=color:#f92672>label</span>&gt;
                <span style=color:#a6e22e>Last</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span>
                &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;text&#39;</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;lastName&#39;</span> {<span style=color:#a6e22e>...lastNameProps</span>} /&gt;
            &lt;/<span style=color:#f92672>label</span>&gt;
            &lt;<span style=color:#f92672>p</span>&gt;
                &lt;<span style=color:#f92672>b</span>&gt;<span style=color:#a6e22e>Good</span> <span style=color:#a6e22e>morning</span>, {<span style=color:#a6e22e>firstNameProps</span>.<span style=color:#a6e22e>value</span>} {<span style=color:#a6e22e>lastNameProps</span>.<span style=color:#a6e22e>value</span>}.&lt;/<span style=color:#f92672>b</span>&gt;
            &lt;/<span style=color:#f92672>p</span>&gt;
        &lt;/&gt;
    );
}
</code></pre></div><p>上記のテストコードの観点としては、firstNameとlastNameの入力値が、pタグで表示されるかどうかを確認するテストコードを書く。</p>
<h4 id=テストコード>テストコード</h4>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>render</span>,<span style=color:#a6e22e>screen</span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;@testing-library/react&#34;</span>;
<span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>Form</span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./Form&#34;</span>;
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>userEvent</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;@testing-library/user-event&#34;</span>;

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>user</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>userEvent</span>.<span style=color:#a6e22e>setup</span>()
<span style=color:#a6e22e>test</span>(<span style=color:#e6db74>&#39;FirstNameとlastNameの入力した値が、表示されること&#39;</span>, <span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
    <span style=color:#a6e22e>render</span>(&lt;<span style=color:#f92672>Form</span> /&gt;);
    
    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>user</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>screen</span>.<span style=color:#a6e22e>getByRole</span>(<span style=color:#e6db74>&#39;textbox&#39;</span>, {<span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;First name:&#39;</span>}), <span style=color:#e6db74>&#39;taro&#39;</span>)
    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>user</span>.<span style=color:#66d9ef>type</span>(<span style=color:#a6e22e>screen</span>.<span style=color:#a6e22e>getByRole</span>(<span style=color:#e6db74>&#39;textbox&#39;</span>, {<span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Last name:&#39;</span>}), <span style=color:#e6db74>&#39;yamada&#39;</span>)

    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>screen</span>.<span style=color:#a6e22e>getByText</span>(<span style=color:#e6db74>&#39;Good morning, taro yamada.&#39;</span>)).<span style=color:#a6e22e>toBeInTheDocument</span>();
})
</code></pre></div><h4 id=テストコードのポイント>テストコードのポイント</h4>
<ul>
<li><code>input</code>タグに入力する内容は、変数にしていない</li>
<li>インタラクションの部分は、関数でラップしていない</li>
<li>テストコードの説明は、実際のユースケースに近いテストデータを使用している</li>
<li>すべての情報が1画面に収まるテストコードになっている</li>
</ul>
<p>上記は比較的まだ小さいコンポーネントだが、変数を使わず、上から順番に見るだけでテストの意図がわかるようになっている。</p>
<h3 id=カスタムhookテスト>カスタムHookテスト</h3>
<p>上記のコンポーネントで使用しているカスタムHook<code>useFormInput</code>のテストコードを書いていく。
<code>input</code>タグで使用する属性を作成するオブジェクトを生成するカスタムHookである。</p>
<h4 id=テスト対象コンポーネント-1>テスト対象コンポーネント</h4>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>ChangeEventHandler</span>, <span style=color:#a6e22e>useState</span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;react&#39;</span>;
<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>useFormInput</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>initialValue</span>: <span style=color:#66d9ef>string</span>) <span style=color:#f92672>=&gt;</span> {
    <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>setValue</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#a6e22e>initialValue</span>);

    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleChange</span>: <span style=color:#66d9ef>ChangeEventHandler</span>&lt;<span style=color:#f92672>HTMLInputElement</span>&gt; <span style=color:#f92672>=</span> (<span style=color:#a6e22e>e</span>)<span style=color:#f92672>=&gt;</span>  {
        <span style=color:#a6e22e>setValue</span>(<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>);
    }

    <span style=color:#66d9ef>return</span> {
        <span style=color:#a6e22e>value</span>: <span style=color:#66d9ef>value</span>,
        <span style=color:#a6e22e>onChange</span>: <span style=color:#66d9ef>handleChange</span>
    };
}
</code></pre></div><h4 id=テストコード-1>テストコード</h4>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>renderHook</span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;@testing-library/react&#34;</span>;
<span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>useFormInput</span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./useFormInput&#34;</span>;
<span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>act</span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react-dom/test-utils&#34;</span>;
<span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>ChangeEvent</span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react&#34;</span>;

<span style=color:#a6e22e>test</span>(<span style=color:#e6db74>&#39;引数の初期値がuseStateのセットされているか&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
    <span style=color:#66d9ef>const</span> {<span style=color:#a6e22e>result</span>} <span style=color:#f92672>=</span> <span style=color:#a6e22e>renderHook</span>(() <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>useFormInput</span>(<span style=color:#e6db74>&#39;taro&#39;</span>))
    
    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>current</span>.<span style=color:#a6e22e>value</span>).<span style=color:#a6e22e>toBe</span>(<span style=color:#e6db74>&#39;taro&#39;</span>)
})

<span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;handleChange&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
    <span style=color:#a6e22e>test</span>(<span style=color:#e6db74>&#39;発火したときに、入力された値がstateにセットされるか&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
        <span style=color:#66d9ef>const</span> {<span style=color:#a6e22e>result</span>} <span style=color:#f92672>=</span> <span style=color:#a6e22e>renderHook</span>(() <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>useFormInput</span>(<span style=color:#e6db74>&#39;taro&#39;</span>))

        <span style=color:#a6e22e>act</span>(() <span style=color:#f92672>=&gt;</span> {
            <span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>current</span>.<span style=color:#a6e22e>onChange</span>({<span style=color:#a6e22e>target</span><span style=color:#f92672>:</span> {<span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;jiro&#39;</span>}} <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>ChangeEvent</span>&lt;<span style=color:#f92672>HTMLInputElement</span>&gt;)
        })

        <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>current</span>.<span style=color:#a6e22e>value</span>).<span style=color:#a6e22e>toBe</span>(<span style=color:#e6db74>&#39;jiro&#39;</span>)
    })
})

</code></pre></div><h4 id=テストコードのポイント-1>テストコードのポイント</h4>
<ul>
<li>初期値の引数は実際に使用している値を使用している</li>
<li><code>onChange</code>で取得するイベントオブジェクトは、実際に使用しているイベントオブジェクトを使用している</li>
<li>カスタムHookで定義されている関数毎で、<code>describe</code>を使用している</li>
</ul>
<hr>
<h2 id=まとめ>まとめ</h2>
<p><strong>テストケースをドキュメント代わりで使用する</strong>視点を持つことで、テストのリーダブル性が上がることがわかった。<br>
意識次第ですぐに実践できるので、ぜひ取り入れていく</p>
<hr>
<h2 id=参考文献>参考文献</h2>
<p><a href=https://speakerdeck.com/jnchito/number-vstat target=_blank>リーダブルテストコード</a><br>
<a href=https://logmi.jp/tech/articles/327449 target=_blank>過度なDRYを行わず、APIドキュメントだと思って書く
脳内メモリを消費させない“リーダブルなテストコード”の書き方</a></p>
</div>
</div><div id=social-media-share class=has-text-centered>
<br>
<div class=share-buttons>
</div>
</div>
<br>
<div id=disqus_thread></div>
<script type=text/javascript>(function(){var a,b;if(window.location.hostname=="localhost")return;a=document.createElement('script'),a.type='text/javascript',a.async=!0,b='',a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
</div>
</div>
<footer class="footer has-background-dark">
<div class="content has-text-centered has-text-white">
<p>© 2022 issei1213 All rights reserved.</p>
</div>
</footer>
</body>
</html>