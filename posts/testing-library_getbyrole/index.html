<!doctype html><html lang=ja-jp>
<head><title>
Testing Libraryで暗黙的なロールを使用したDOMの取得方法 |
TechBlog</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name=description content="背景 現在以下の書籍でフロントのテストを学習しているので、勉強になったDOMの取得方法をまとめる。 書籍通り、ReactのUIコンポーネントのテスト方法を記載していく。
 概要 ReactのUIコンポーネントのDOMを取得する方法で、暗黙的なロールを活用した取得方法があったので、まとめていく
 本題 以下のコンポーネントのテストをしていく。
import {ReactNode} from &#34;react&#34;; export const Heading = ({children}: {children: ReactNode}) => { return ( <h1>{children}</h1> ); }; 今回は簡易的に、propsの値がh1タグで表示されているかをテストしていく。
import {render, screen} from &#34;@testing-library/react&#34;; import {Heading} from &#34;./Heading&#34;; test('propsが値がh1タグに存在していること', () => { render(<Heading>test</Heading>) expect(screen.getByRole('heading', {name: 'test'})).toBeInTheDocument() }) 上記のgetByRoleの第一引数にheadingを指定しているが、h1タグの暗黙的なロールがheadingであるため、headingを指定している。
このように暗黙的なロールをうまく使えば、test-idみたいなカスタム属性をなどを使用せずに、テストをかくことができる。 また、Testing Libraryも公式も暗黙的なロールを使用することを推奨している。
暗黙的なルール一覧はこちらから確認ができる。
※上記はaria-queryというライブラリのドキュメントであるが、Testing Libraryのライブラリは内部的に依存するので、上記を参考にしても問題ない
 まとめ UIコンポーネントのテストをする際は、暗黙的なロールを使用することで、テストを書きやすくなるので、ぜひ活用していきたい。
 参考文献 Testing Library
暗黙的なルール一覧(aria-query)
フロントエンド開発のためのテスト入門 今からでも知っておきたい自動テスト戦略の必須知識
    ">
<meta property="og:image" content="https://issei1213.github.io/img/logo.png">
<meta name=twitter:card content="summary">
<meta property="og:title" content="Testing Libraryで暗黙的なロールを使用したDOMの取得方法">
<meta property="og:description" content="背景 現在以下の書籍でフロントのテストを学習しているので、勉強になったDOMの取得方法をまとめる。 書籍通り、ReactのUIコンポーネントのテスト方法を記載していく。
 概要 ReactのUIコンポーネントのDOMを取得する方法で、暗黙的なロールを活用した取得方法があったので、まとめていく
 本題 以下のコンポーネントのテストをしていく。
import {ReactNode} from &#34;react&#34;; export const Heading = ({children}: {children: ReactNode}) => { return ( <h1>{children}</h1> ); }; 今回は簡易的に、propsの値がh1タグで表示されているかをテストしていく。
import {render, screen} from &#34;@testing-library/react&#34;; import {Heading} from &#34;./Heading&#34;; test('propsが値がh1タグに存在していること', () => { render(<Heading>test</Heading>) expect(screen.getByRole('heading', {name: 'test'})).toBeInTheDocument() }) 上記のgetByRoleの第一引数にheadingを指定しているが、h1タグの暗黙的なロールがheadingであるため、headingを指定している。
このように暗黙的なロールをうまく使えば、test-idみたいなカスタム属性をなどを使用せずに、テストをかくことができる。 また、Testing Libraryも公式も暗黙的なロールを使用することを推奨している。
暗黙的なルール一覧はこちらから確認ができる。
※上記はaria-queryというライブラリのドキュメントであるが、Testing Libraryのライブラリは内部的に依存するので、上記を参考にしても問題ない
 まとめ UIコンポーネントのテストをする際は、暗黙的なロールを使用することで、テストを書きやすくなるので、ぜひ活用していきたい。
 参考文献 Testing Library
暗黙的なルール一覧(aria-query)
フロントエンド開発のためのテスト入門 今からでも知っておきたい自動テスト戦略の必須知識">
<meta property="og:type" content="article">
<meta property="og:url" content="https://issei1213.github.io/posts/testing-library_getbyrole/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2023-05-21T23:11:10+09:00">
<meta property="article:modified_time" content="2023-05-21T23:11:10+09:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Testing Libraryで暗黙的なロールを使用したDOMの取得方法">
<meta name=twitter:description content="背景 現在以下の書籍でフロントのテストを学習しているので、勉強になったDOMの取得方法をまとめる。 書籍通り、ReactのUIコンポーネントのテスト方法を記載していく。
 概要 ReactのUIコンポーネントのDOMを取得する方法で、暗黙的なロールを活用した取得方法があったので、まとめていく
 本題 以下のコンポーネントのテストをしていく。
import {ReactNode} from &#34;react&#34;; export const Heading = ({children}: {children: ReactNode}) => { return ( <h1>{children}</h1> ); }; 今回は簡易的に、propsの値がh1タグで表示されているかをテストしていく。
import {render, screen} from &#34;@testing-library/react&#34;; import {Heading} from &#34;./Heading&#34;; test('propsが値がh1タグに存在していること', () => { render(<Heading>test</Heading>) expect(screen.getByRole('heading', {name: 'test'})).toBeInTheDocument() }) 上記のgetByRoleの第一引数にheadingを指定しているが、h1タグの暗黙的なロールがheadingであるため、headingを指定している。
このように暗黙的なロールをうまく使えば、test-idみたいなカスタム属性をなどを使用せずに、テストをかくことができる。 また、Testing Libraryも公式も暗黙的なロールを使用することを推奨している。
暗黙的なルール一覧はこちらから確認ができる。
※上記はaria-queryというライブラリのドキュメントであるが、Testing Libraryのライブラリは内部的に依存するので、上記を参考にしても問題ない
 まとめ UIコンポーネントのテストをする際は、暗黙的なロールを使用することで、テストを書きやすくなるので、ぜひ活用していきたい。
 参考文献 Testing Library
暗黙的なルール一覧(aria-query)
フロントエンド開発のためのテスト入門 今からでも知っておきたい自動テスト戦略の必須知識">
<meta itemprop=name content="Testing Libraryで暗黙的なロールを使用したDOMの取得方法">
<meta itemprop=description content="背景 現在以下の書籍でフロントのテストを学習しているので、勉強になったDOMの取得方法をまとめる。 書籍通り、ReactのUIコンポーネントのテスト方法を記載していく。
 概要 ReactのUIコンポーネントのDOMを取得する方法で、暗黙的なロールを活用した取得方法があったので、まとめていく
 本題 以下のコンポーネントのテストをしていく。
import {ReactNode} from &#34;react&#34;; export const Heading = ({children}: {children: ReactNode}) => { return ( <h1>{children}</h1> ); }; 今回は簡易的に、propsの値がh1タグで表示されているかをテストしていく。
import {render, screen} from &#34;@testing-library/react&#34;; import {Heading} from &#34;./Heading&#34;; test('propsが値がh1タグに存在していること', () => { render(<Heading>test</Heading>) expect(screen.getByRole('heading', {name: 'test'})).toBeInTheDocument() }) 上記のgetByRoleの第一引数にheadingを指定しているが、h1タグの暗黙的なロールがheadingであるため、headingを指定している。
このように暗黙的なロールをうまく使えば、test-idみたいなカスタム属性をなどを使用せずに、テストをかくことができる。 また、Testing Libraryも公式も暗黙的なロールを使用することを推奨している。
暗黙的なルール一覧はこちらから確認ができる。
※上記はaria-queryというライブラリのドキュメントであるが、Testing Libraryのライブラリは内部的に依存するので、上記を参考にしても問題ない
 まとめ UIコンポーネントのテストをする際は、暗黙的なロールを使用することで、テストを書きやすくなるので、ぜひ活用していきたい。
 参考文献 Testing Library
暗黙的なルール一覧(aria-query)
フロントエンド開発のためのテスト入門 今からでも知っておきたい自動テスト戦略の必須知識"><meta itemprop=datePublished content="2023-05-21T23:11:10+09:00">
<meta itemprop=dateModified content="2023-05-21T23:11:10+09:00">
<meta itemprop=wordCount content="59">
<meta itemprop=keywords content="週1ゆるアウトプット,">
<link rel=canonical href=https://issei1213.github.io/posts/testing-library_getbyrole/>
<link rel=icon type=image/png href=https://issei1213.github.io/img/favicon.png>
<link rel=stylesheet href=/css/font-awesome.min.css>
<link rel=stylesheet href=/css/bulma.min.css>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','G-3WPQ6FJXBQ','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
<script src=/js/ramium.js></script>
<link rel=stylesheet href=/css/ramium.css>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3WPQ6FJXBQ"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config',"G-3WPQ6FJXBQ")</script>
</head>
<body><nav class="navbar is-dark" role=navigation aria-label="main navigation">
<div class=navbar-brand>
<a class=navbar-item href=/>
<strong>TechBlog </strong>
</a>
<a role=button class="navbar-burger burger" aria-label=menu aria-expanded=false data-target=navbarBasicExample>
<span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span>
</a>
</div>
<div id=navbarBasicExample class=navbar-menu>
<div class=navbar-start>
<a class=navbar-item href=/>ホーム</a>
<div class="navbar-item has-dropdown is-hoverable">
<a class=navbar-link>ブログ</a>
<div class=navbar-dropdown>
<a class=navbar-item href=/tags/>タグ</a>
<a class=navbar-item href=/posts/>記事</a>
</div>
</div>
</div>
<div class=navbar-end>
<a class="navbar-item navgithub" href=https://github.com/issei1213 target=_blank>
<i class="fa fa-github fa-2x"></i>
</a>
<a class="navbar-item navgithub" href=https://twitter.com/abIOELEsEfu6Os0 target=_blank>
<i class="fa brands fa-twitter fa-2x"></i>
</a>
</div>
</div>
</nav><div class="columns is-centered">
<div id=page-body class="column is-7">
<div class="content blog">
<h1>Testing Libraryで暗黙的なロールを使用したDOMの取得方法</h1>
<div id=infobar class="level is-mobile">
<div class=level-left>
<div class=level-item>
<p class="subtitle info date">May 21, 2023
</p>
</div>
<div class=level-item>
<p class="subtitle info">
4 mins read
</p>
</div>
</div>
<div class="level-right is-hidden-touch">
<div class=tags>
<a class="tag is-dark is-rounded" href=/tags/%E9%80%B11%E3%82%86%E3%82%8B%E3%82%A2%E3%82%A6%E3%83%88%E3%83%97%E3%83%83%E3%83%88>週1ゆるアウトプット</a>
</div>
</div>
</div>
<div class="tags is-hidden-desktop">
<a class="tag is-dark is-rounded" href=/tags/%E9%80%B11%E3%82%86%E3%82%8B%E3%82%A2%E3%82%A6%E3%83%88%E3%83%97%E3%83%83%E3%83%88>週1ゆるアウトプット</a>
</div>
<div class=blog-text>
<h2 id=背景>背景</h2>
<p>現在以下の書籍でフロントのテストを学習しているので、勉強になったDOMの取得方法をまとめる。
書籍通り、ReactのUIコンポーネントのテスト方法を記載していく。</p>
<hr>
<h2 id=概要>概要</h2>
<p>ReactのUIコンポーネントのDOMを取得する方法で、暗黙的なロールを活用した取得方法があったので、まとめていく</p>
<hr>
<h2 id=本題>本題</h2>
<p>以下のコンポーネントのテストをしていく。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>ReactNode</span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react&#34;</span>;

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>Heading</span> <span style=color:#f92672>=</span> ({<span style=color:#a6e22e>children</span>}<span style=color:#f92672>:</span> {<span style=color:#a6e22e>children</span>: <span style=color:#66d9ef>ReactNode</span>}) <span style=color:#f92672>=&gt;</span> {
    <span style=color:#66d9ef>return</span> (
        &lt;<span style=color:#f92672>h1</span>&gt;{<span style=color:#a6e22e>children</span>}&lt;/<span style=color:#f92672>h1</span>&gt;
    );
};
</code></pre></div><p>今回は簡易的に、<code>props</code>の値が<code>h1</code>タグで表示されているかをテストしていく。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>render</span>, <span style=color:#a6e22e>screen</span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;@testing-library/react&#34;</span>;
<span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>Heading</span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./Heading&#34;</span>;

<span style=color:#a6e22e>test</span>(<span style=color:#e6db74>&#39;propsが値がh1タグに存在していること&#39;</span>, () <span style=color:#f92672>=&gt;</span> {
    <span style=color:#a6e22e>render</span>(&lt;<span style=color:#f92672>Heading</span>&gt;<span style=color:#a6e22e>test</span>&lt;/<span style=color:#f92672>Heading</span>&gt;)

    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>screen</span>.<span style=color:#a6e22e>getByRole</span>(<span style=color:#e6db74>&#39;heading&#39;</span>, {<span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;test&#39;</span>})).<span style=color:#a6e22e>toBeInTheDocument</span>()
})
</code></pre></div><p>上記の<code>getByRole</code>の第一引数に<code>heading</code>を指定しているが、h1タグの暗黙的なロールが<code>heading</code>であるため、<code>heading</code>を指定している。<br>
このように暗黙的なロールをうまく使えば、<code>test-id</code>みたいなカスタム属性をなどを使用せずに、テストをかくことができる。
また、<a href=https://testing-library.com/docs/queries/about/#priority target=_blank>Testing Library</a>も公式も暗黙的なロールを使用することを推奨している。</p>
<p>暗黙的なルール一覧は<a href=https://www.npmjs.com/package/aria-query target=_blank>こちら</a>から確認ができる。<br>
※上記は<code>aria-query</code>というライブラリのドキュメントであるが、Testing Libraryのライブラリは内部的に依存するので、上記を参考にしても問題ない</p>
<hr>
<h2 id=まとめ>まとめ</h2>
<p>UIコンポーネントのテストをする際は、暗黙的なロールを使用することで、テストを書きやすくなるので、ぜひ活用していきたい。</p>
<hr>
<h2 id=参考文献>参考文献</h2>
<p><a href=https://testing-library.com/docs/queries/about/#priority target=_blank>Testing Library</a><br>
<a href=https://www.npmjs.com/package/aria-query target=_blank>暗黙的なルール一覧(aria-query)</a><br>
<a href=https://www.shoeisha.co.jp/book/detail/9784798178639 target=_blank>フロントエンド開発のためのテスト入門 今からでも知っておきたい自動テスト戦略の必須知識</a></p>
</div>
</div><div id=social-media-share class=has-text-centered>
<br>
<div class=share-buttons>
</div>
</div>
<br>
<div id=disqus_thread></div>
<script type=text/javascript>(function(){var a,b;if(window.location.hostname=="localhost")return;a=document.createElement('script'),a.type='text/javascript',a.async=!0,b='',a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
</div>
</div>
<footer class="footer has-background-dark">
<div class="content has-text-centered has-text-white">
<p>© 2022 issei1213 All rights reserved.</p>
</div>
</footer>
</body>
</html>