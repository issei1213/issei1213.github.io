<!doctype html><html lang=ja-jp>
<head><title>
ã‚Šã‚ã‚¯ãƒˆã®TypeScriptã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚° |
TechBlog</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name=description content="èƒŒæ™¯ TypeScriptã®æ•™æã§ä»¥ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãŒã‚ã£ãŸã®ã§ã€ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¦ã„ãã€‚
æ¦‚è¦ ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ã—ã¦ã„ãã€‚
éåŒæœŸãƒ‡ãƒ¼ã‚¿å–å¾—é–¢æ•°ã‚’ãƒ©ãƒƒãƒ—ã—ã¦ã€ãã“ã§èµ·ãã‚‹ä¾‹å¤–ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¤ã¤æ­£å¸¸ç³»ã¨ç•°å¸¸ç³»ã«æŒ¯ã‚Šåˆ†ã‘ã‚‹é–¢æ•°ã‚’å®šç¾©ã—ã¦ã„ã‚‹ã€‚
type Result<T, E extends Error> = Ok<T, E> | Err<T, E> export class Ok<T, E extends Error> { constructor(readonly val: T) {} isOk = (): this is Ok<T, E> => true isErr = (): this is Err<T, E> => false } export class Err<T, E extends Error> { constructor(readonly err: E) {} isOk = (): this is Ok<T, E> => false isErr = (): this is Err<T, E> => true } export const withResult = <T, A extends any[], E extends Error>(fn: (.
    ">
<meta property="og:title" content="ã‚Šã‚ã‚¯ãƒˆã®TypeScriptã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°">
<meta property="og:description" content="èƒŒæ™¯ TypeScriptã®æ•™æã§ä»¥ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãŒã‚ã£ãŸã®ã§ã€ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¦ã„ãã€‚
æ¦‚è¦ ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ã—ã¦ã„ãã€‚
éåŒæœŸãƒ‡ãƒ¼ã‚¿å–å¾—é–¢æ•°ã‚’ãƒ©ãƒƒãƒ—ã—ã¦ã€ãã“ã§èµ·ãã‚‹ä¾‹å¤–ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¤ã¤æ­£å¸¸ç³»ã¨ç•°å¸¸ç³»ã«æŒ¯ã‚Šåˆ†ã‘ã‚‹é–¢æ•°ã‚’å®šç¾©ã—ã¦ã„ã‚‹ã€‚
type Result<T, E extends Error> = Ok<T, E> | Err<T, E> export class Ok<T, E extends Error> { constructor(readonly val: T) {} isOk = (): this is Ok<T, E> => true isErr = (): this is Err<T, E> => false } export class Err<T, E extends Error> { constructor(readonly err: E) {} isOk = (): this is Ok<T, E> => false isErr = (): this is Err<T, E> => true } export const withResult = <T, A extends any[], E extends Error>(fn: (.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://issei1213.github.io/posts/typescript_react-sample-code-reading/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2022-04-02T13:39:20+09:00">
<meta property="article:modified_time" content="2022-04-02T13:39:20+09:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="ã‚Šã‚ã‚¯ãƒˆã®TypeScriptã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°">
<meta name=twitter:description content="èƒŒæ™¯ TypeScriptã®æ•™æã§ä»¥ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãŒã‚ã£ãŸã®ã§ã€ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¦ã„ãã€‚
æ¦‚è¦ ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ã—ã¦ã„ãã€‚
éåŒæœŸãƒ‡ãƒ¼ã‚¿å–å¾—é–¢æ•°ã‚’ãƒ©ãƒƒãƒ—ã—ã¦ã€ãã“ã§èµ·ãã‚‹ä¾‹å¤–ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¤ã¤æ­£å¸¸ç³»ã¨ç•°å¸¸ç³»ã«æŒ¯ã‚Šåˆ†ã‘ã‚‹é–¢æ•°ã‚’å®šç¾©ã—ã¦ã„ã‚‹ã€‚
type Result<T, E extends Error> = Ok<T, E> | Err<T, E> export class Ok<T, E extends Error> { constructor(readonly val: T) {} isOk = (): this is Ok<T, E> => true isErr = (): this is Err<T, E> => false } export class Err<T, E extends Error> { constructor(readonly err: E) {} isOk = (): this is Ok<T, E> => false isErr = (): this is Err<T, E> => true } export const withResult = <T, A extends any[], E extends Error>(fn: (.">
<meta itemprop=name content="ã‚Šã‚ã‚¯ãƒˆã®TypeScriptã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°">
<meta itemprop=description content="èƒŒæ™¯ TypeScriptã®æ•™æã§ä»¥ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãŒã‚ã£ãŸã®ã§ã€ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¦ã„ãã€‚
æ¦‚è¦ ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ã—ã¦ã„ãã€‚
éåŒæœŸãƒ‡ãƒ¼ã‚¿å–å¾—é–¢æ•°ã‚’ãƒ©ãƒƒãƒ—ã—ã¦ã€ãã“ã§èµ·ãã‚‹ä¾‹å¤–ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¤ã¤æ­£å¸¸ç³»ã¨ç•°å¸¸ç³»ã«æŒ¯ã‚Šåˆ†ã‘ã‚‹é–¢æ•°ã‚’å®šç¾©ã—ã¦ã„ã‚‹ã€‚
type Result<T, E extends Error> = Ok<T, E> | Err<T, E> export class Ok<T, E extends Error> { constructor(readonly val: T) {} isOk = (): this is Ok<T, E> => true isErr = (): this is Err<T, E> => false } export class Err<T, E extends Error> { constructor(readonly err: E) {} isOk = (): this is Ok<T, E> => false isErr = (): this is Err<T, E> => true } export const withResult = <T, A extends any[], E extends Error>(fn: (."><meta itemprop=datePublished content="2022-04-02T13:39:20+09:00">
<meta itemprop=dateModified content="2022-04-02T13:39:20+09:00">
<meta itemprop=wordCount content="426">
<meta itemprop=keywords content="TypeScript,">
<link rel=canonical href=https://issei1213.github.io/posts/typescript_react-sample-code-reading/>
<link rel=icon type=image/png href=https://issei1213.github.io//img/favicon.png>
<link rel=stylesheet href=/css/font-awesome.min.css>
<link rel=stylesheet href=/css/bulma.min.css>
<script src=/js/ramium.js></script>
<link rel=stylesheet href=/css/ramium.css>
</head>
<body><nav class="navbar is-dark" role=navigation aria-label="main navigation">
<div class=navbar-brand>
<a class=navbar-item href=/>
<strong>TechBlog </strong>
</a>
<a role=button class="navbar-burger burger" aria-label=menu aria-expanded=false data-target=navbarBasicExample>
<span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span>
</a>
</div>
<div id=navbarBasicExample class=navbar-menu>
<div class=navbar-start>
<a class=navbar-item href=/>ãƒ›ãƒ¼ãƒ </a>
<div class="navbar-item has-dropdown is-hoverable">
<a class=navbar-link>ãƒ–ãƒ­ã‚°</a>
<div class=navbar-dropdown>
<a class=navbar-item href=/tags/>ã‚¿ã‚°</a>
<a class=navbar-item href=/posts/>è¨˜äº‹</a>
</div>
</div>
</div>
<div class=navbar-end>
<a class="navbar-item navgithub" href=https://github.com/issei1213 target=_blank>
<i class="fa fa-github fa-2x"></i>
</a>
<a class="navbar-item navgithub" href=https://twitter.com/abIOELEsEfu6Os0 target=_blank>
<i class="fa brands fa-twitter fa-2x"></i>
</a>
</div>
</div>
</nav><div class="columns is-centered">
<div id=page-body class="column is-7">
<div class="content blog">
<h1>ã‚Šã‚ã‚¯ãƒˆã®TypeScriptã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°</h1>
<div id=infobar class="level is-mobile">
<div class=level-left>
<div class=level-item>
<p class="subtitle info date">Apr 2, 2022
</p>
</div>
<div class=level-item>
<p class="subtitle info">
6 mins read
</p>
</div>
</div>
<div class="level-right is-hidden-touch">
<div class=tags>
<a class="tag is-dark is-rounded" href=/tags/typescript>TypeScript</a>
</div>
</div>
</div>
<div class="tags is-hidden-desktop">
<a class="tag is-dark is-rounded" href=/tags/typescript>Type script</a>
</div>
<div class=blog-text>
<h2 id=èƒŒæ™¯>èƒŒæ™¯</h2>
<p>TypeScriptã®æ•™æã§ä»¥ä¸‹ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãŒã‚ã£ãŸã®ã§ã€ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¦ã„ãã€‚</p>
<h2 id=æ¦‚è¦>æ¦‚è¦</h2>
<p>ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’ã—ã¦ã„ãã€‚<br>
éåŒæœŸãƒ‡ãƒ¼ã‚¿å–å¾—é–¢æ•°ã‚’ãƒ©ãƒƒãƒ—ã—ã¦ã€ãã“ã§èµ·ãã‚‹ä¾‹å¤–ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¤ã¤æ­£å¸¸ç³»ã¨ç•°å¸¸ç³»ã«æŒ¯ã‚Šåˆ†ã‘ã‚‹é–¢æ•°ã‚’å®šç¾©ã—ã¦ã„ã‚‹ã€‚</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Result</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>Error</span>&gt; <span style=color:#f92672>=</span> <span style=color:#a6e22e>Ok</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span>&gt; <span style=color:#f92672>|</span> <span style=color:#a6e22e>Err</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span>&gt;

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Ok</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>Error</span>&gt; {
    <span style=color:#66d9ef>constructor</span>(<span style=color:#66d9ef>readonly</span> <span style=color:#a6e22e>val</span>: <span style=color:#66d9ef>T</span>) {}
    <span style=color:#a6e22e>isOk</span> <span style=color:#f92672>=</span> ()<span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span> <span style=color:#66d9ef>is</span> <span style=color:#a6e22e>Ok</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span>&gt; <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>true</span>
    <span style=color:#a6e22e>isErr</span> <span style=color:#f92672>=</span> ()<span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span> <span style=color:#66d9ef>is</span> <span style=color:#a6e22e>Err</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span>&gt; <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>false</span>
}
<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Err</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>Error</span>&gt; {
    <span style=color:#66d9ef>constructor</span>(<span style=color:#66d9ef>readonly</span> <span style=color:#a6e22e>err</span>: <span style=color:#66d9ef>E</span>) {}
    <span style=color:#a6e22e>isOk</span> <span style=color:#f92672>=</span> ()<span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span> <span style=color:#66d9ef>is</span> <span style=color:#a6e22e>Ok</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span>&gt; <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>false</span>
    <span style=color:#a6e22e>isErr</span> <span style=color:#f92672>=</span> ()<span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span> <span style=color:#66d9ef>is</span> <span style=color:#a6e22e>Err</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span>&gt; <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>true</span>
}
<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>withResult</span> <span style=color:#f92672>=</span>
    &lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>A</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>any</span><span style=color:#960050;background-color:#1e0010>[],</span> <span style=color:#a6e22e>E</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>Error</span>&gt;(<span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> (...<span style=color:#a6e22e>args</span>: <span style=color:#66d9ef>A</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>T</span>&gt;)    <span style=color:#f92672>=&gt;</span>
        <span style=color:#66d9ef>async</span> (...<span style=color:#a6e22e>args</span>: <span style=color:#66d9ef>A</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>Result</span><span style=color:#960050;background-color:#1e0010>&lt;</span><span style=color:#a6e22e>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span>&gt;<span style=color:#f92672>&gt;</span> <span style=color:#f92672>=&gt;</span> {
            <span style=color:#66d9ef>try</span> {
                <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Ok</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fn</span>(...<span style=color:#a6e22e>args</span>))
            } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
                <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>error</span> <span style=color:#66d9ef>instanceof</span> Error) {
                    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Err</span>(<span style=color:#a6e22e>error</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>E</span>)
                }
                <span style=color:#75715e>//   return new Err(error as E)
</span><span style=color:#75715e></span>            }
        }

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>User</span> <span style=color:#f92672>=</span> {
    <span style=color:#a6e22e>userId</span>: <span style=color:#66d9ef>number</span>,
    <span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>number</span>,
    <span style=color:#a6e22e>title</span>: <span style=color:#66d9ef>string</span>,
    <span style=color:#a6e22e>completed</span>: <span style=color:#66d9ef>boolean</span>
}

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>getUser</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span>(<span style=color:#a6e22e>userId</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>User</span>&gt;  <span style=color:#f92672>=&gt;</span> {
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>response</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>`https://jsonplaceholder.typicode.com/todos/</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>userId</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>)
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>json</span>()
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>result</span>
}


<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>wrapperMethod</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span>()<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>void</span>&gt; <span style=color:#f92672>=&gt;</span> {
    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>withResult</span>(<span style=color:#a6e22e>getUser</span>)(<span style=color:#e6db74>&#39;1&#39;</span>);
    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>data</span>)
    <span style=color:#75715e>// Ok: {
</span><span style=color:#75715e></span>    <span style=color:#75715e>// &#34;val&#34;: {
</span><span style=color:#75715e></span>    <span style=color:#75715e>//     &#34;userId&#34;: 1,
</span><span style=color:#75715e></span>    <span style=color:#75715e>//        &#34;id&#34;: 1,
</span><span style=color:#75715e></span>    <span style=color:#75715e>//        &#34;title&#34;: &#34;delectus aut autem&#34;,
</span><span style=color:#75715e></span>    <span style=color:#75715e>//        &#34;completed&#34;: false
</span><span style=color:#75715e></span>    <span style=color:#75715e>//  }
</span><span style=color:#75715e></span>    <span style=color:#75715e>//}
</span><span style=color:#75715e></span>    
    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>isErr</span>()) {
        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>err</span>);
    } <span style=color:#66d9ef>else</span> {
        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>user</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>val</span>;
        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`Hello, userId:</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>userId</span><span style=color:#e6db74>}</span><span style=color:#e6db74>!`</span>);
        <span style=color:#75715e>// &#34;Hello, userId:1!&#34; 
</span><span style=color:#75715e></span>    }
}

<span style=color:#a6e22e>wrapperMethod</span>()
</code></pre></div><h2 id=æœ¬é¡Œ>æœ¬é¡Œ</h2>
<ol>
<li>classã®ä¸­èº«ã‚’ç¢ºèªã—ã¦ã„ã</li>
</ol>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Ok</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>Error</span>&gt; {
    <span style=color:#66d9ef>constructor</span>(<span style=color:#66d9ef>readonly</span> <span style=color:#a6e22e>val</span>: <span style=color:#66d9ef>T</span>) {}
    <span style=color:#a6e22e>isOk</span> <span style=color:#f92672>=</span> ()<span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span> <span style=color:#66d9ef>is</span> <span style=color:#a6e22e>Ok</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span>&gt; <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>true</span>
    <span style=color:#a6e22e>isErr</span> <span style=color:#f92672>=</span> ()<span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span> <span style=color:#66d9ef>is</span> <span style=color:#a6e22e>Err</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span>&gt; <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>false</span>
}

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Err</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>Error</span>&gt; {
    <span style=color:#66d9ef>constructor</span>(<span style=color:#66d9ef>readonly</span> <span style=color:#a6e22e>err</span>: <span style=color:#66d9ef>E</span>) {}
    <span style=color:#a6e22e>isOk</span> <span style=color:#f92672>=</span> ()<span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span> <span style=color:#66d9ef>is</span> <span style=color:#a6e22e>Ok</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span>&gt; <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>false</span>
    <span style=color:#a6e22e>isErr</span> <span style=color:#f92672>=</span> ()<span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span> <span style=color:#66d9ef>is</span> <span style=color:#a6e22e>Err</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span>&gt; <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>true</span>
}
</code></pre></div><p>1-1. <code>E extends Error</code>ã¯ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹å‹ã§å‹æ¨è«–ã•ã‚Œã‚‹å‹<code>E</code>ã«<code>Error</code>å‹ã®åˆ¶ç´„ã‚’è¨­ã‘ã¦ã„ã‚‹<br>
1-2. <code>isOk = (): this is Ok&lt;T, E> => true</code>ã®<code>is</code>ã¯<code>isOK</code>ãƒ¡ã‚½ãƒƒãƒ‰ã®æˆ»ã‚Šå€¤ã‚’ã‚¯ãƒ©ã‚¹ã§å‹æŒ‡å®šã•ã›ã¦ã€<code>this</code>ã®çµã‚Šè¾¼ã¿ã‚’ã—ã¦ã„ã‚‹ã€‚<br>
<a href=https://qiita.com/ryo2132/items/ce9e13899e45dcfaff9b#is target=_blank>TypeScript ã®"is"ã¨"in"ã‚’ç†è§£ã™ã‚‹</a><br>
1-3. å„ã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã®è¿”ã‚Šå€¤ã¯Booleanã¯é€†ã«ãªã£ã¦ã„ã‚‹</p>
<ol start=2>
<li><code>Result</code>ã‚’ã¿ã¦ã„ã</li>
</ol>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Result</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>Error</span>&gt; <span style=color:#f92672>=</span> <span style=color:#a6e22e>Ok</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span>&gt; <span style=color:#f92672>|</span> <span style=color:#a6e22e>Err</span>&lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span>&gt;
</code></pre></div><p>2-1. 1-1ã¨åŒã˜ã‚ˆã†ã«<code>Result</code>ã®ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹å†…ã§ã‚‚åˆ¶ç´„ã‚’è¨­ã‘ã¦ã„ã‚‹ <br>
2-2. å…ˆã»ã©å®šç¾©ã—ã¦ã‚¯ãƒ©ã‚¹ã®åˆä½µå‹ã‚’å®šç¾©ã—ã¦ã„ã‚‹</p>
<ol start=3>
<li><code>withResult</code>é–¢æ•°ã‚’è¦‹ã¦ã„ã</li>
</ol>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>withResult</span> <span style=color:#f92672>=</span>
  &lt;<span style=color:#f92672>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>A</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>any</span><span style=color:#960050;background-color:#1e0010>[],</span> <span style=color:#a6e22e>E</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>Error</span>&gt;(<span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> (...<span style=color:#a6e22e>args</span>: <span style=color:#66d9ef>A</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>T</span>&gt;) <span style=color:#f92672>=&gt;</span>
  <span style=color:#66d9ef>async</span> (...<span style=color:#a6e22e>args</span>: <span style=color:#66d9ef>A</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>Result</span><span style=color:#960050;background-color:#1e0010>&lt;</span><span style=color:#a6e22e>T</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span>&gt;<span style=color:#f92672>&gt;</span> <span style=color:#f92672>=&gt;</span> {
    <span style=color:#66d9ef>try</span> {
      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Ok</span>(<span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fn</span>(...<span style=color:#a6e22e>args</span>))
    } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>error</span> <span style=color:#66d9ef>instanceof</span> Error) {
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Err</span>(<span style=color:#a6e22e>error</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>E</span>)
      }
    <span style=color:#75715e>//   return new Err(error as E)
</span><span style=color:#75715e></span>    }
  }
</code></pre></div><p>3-1. <code>&lt;T, A extends any[], E extends Error>(fn: (...args: A) => Promise&lt;T>)</code>ã§å‹æ¨è«–ã•ã›ã¦<code>T</code> <code>A</code> <code>E</code>ã®å‹ã‚’ã—ã¦ã„ãã€‚<br>
<code>withResult(getUser)('1')</code>ã®å ´åˆã€<code>getUser</code>ã®éƒ¨åˆ†ãŒ<code>(fn: (...args: A) => Promise&lt;T>)</code>ã«ãªã‚‹ã€‚ã“ã‚Œã‚ˆã‚Šã€<code>A: string[]</code> <code>T: User</code>ã§å‹æ¨è«–ã•ã‚Œã‚‹ã€‚
ãªã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå¤‰æ›ã•ã‚Œã‚‹</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript>&lt;<span style=color:#f92672>User</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>string</span><span style=color:#960050;background-color:#1e0010>[]</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>any</span><span style=color:#960050;background-color:#1e0010>[],</span> <span style=color:#a6e22e>E</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>Error</span>&gt;(<span style=color:#a6e22e>fn</span><span style=color:#f92672>:</span> (...<span style=color:#a6e22e>args</span>: <span style=color:#66d9ef>string</span>[]) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>User</span>&gt;)
</code></pre></div><p>3-2. <code>async (...args: A): Promise&lt;Result&lt;T, E>></code>ã“ã®éƒ¨åˆ†ã‚‚ä¸Šè¨˜ã®å‹æ¨è«–ã®çµæœã€ä»¥ä¸‹ã«ãªã‚‹</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=color:#66d9ef>async</span> (...<span style=color:#a6e22e>args</span>: <span style=color:#66d9ef>string</span>[])<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>Result</span><span style=color:#960050;background-color:#1e0010>&lt;</span><span style=color:#a6e22e>User</span><span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#a6e22e>E</span>&gt;<span style=color:#f92672>&gt;</span>
</code></pre></div><p>3-3. <code>return new Ok(await fn(...args))</code>ã§fné–¢æ•°(ä»Šå›ã®å ´åˆã€<code>getUser(1)</code>)å®Ÿè¡Œã•ã‚Œã€ãã®çµæœãŒ<code>Ok</code>ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒä½œæˆã•ã‚Œã‚‹ã€‚<br>
ã‚‚ã—ä¾‹å¤–å‡¦ç†ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€<code>Err</code>ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒä½œæˆã•ã‚Œã‚‹ã€‚</p>
<h2 id=ã¾ã¨ã‚>ã¾ã¨ã‚</h2>
<p>æ­£ç›´ã“ã®è§£èª¬ã«ã¯è‡ªä¿¡ãŒãªã„ã®ã§ã€ãƒ„ãƒƒã‚³ãƒŸãŒã‚ã‚Šã¾ã—ãŸã‚‰ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™ğŸ™‡â€</p>
<h2 id=å‚è€ƒæ–‡çŒ®>å‚è€ƒæ–‡çŒ®</h2>
<p><a href=https://oukayuka.booth.pm/items/2368045 target=_blank>ã‚Šã‚ã‚¯ãƒˆï¼ TypeScriptã§å§‹ã‚ã‚‹ã¤ã‚‰ããªã„Reacté–‹ç™º ç¬¬3.1ç‰ˆã€â… . è¨€èªãƒ»ç’°å¢ƒç·¨ã€‘</a><br>
<a href=https://qiita.com/ryo2132/items/ce9e13899e45dcfaff9b#is target=_blank>TypeScript ã®"is"ã¨"in"ã‚’ç†è§£ã™ã‚‹</a></p>
</div>
</div><div id=social-media-share class=has-text-centered>
<br>
<div class=share-buttons>
</div>
</div>
<br>
<div id=disqus_thread></div>
<script type=text/javascript>(function(){var a,b;if(window.location.hostname=="localhost")return;a=document.createElement('script'),a.type='text/javascript',a.async=!0,b='',a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
</div>
</div>
<footer class="footer has-background-dark">
<div class="content has-text-centered has-text-white">
<p>Â© 2022 issei1213 All rights reserved.</p>
</div>
</footer>
</body>
</html>