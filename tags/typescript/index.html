<!doctype html><html lang=ja-jp>
<head><title>
TypeScript |
TechBlog</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name=description content="技術ブログ
    ">
<meta property="og:image" content="https://issei1213.github.io/img/logo.png">
<meta name=twitter:card content="summary">
<meta property="og:title" content="TypeScript">
<meta property="og:description" content="技術ブログ">
<meta property="og:type" content="website">
<meta property="og:url" content="https://issei1213.github.io/tags/typescript/">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="TypeScript">
<meta name=twitter:description content="技術ブログ">
<meta itemprop=name content="TypeScript">
<meta itemprop=description content="技術ブログ">
<link rel=canonical href=https://issei1213.github.io/tags/typescript/>
<link rel=icon type=image/png href=https://issei1213.github.io/img/favicon.png>
<link rel=stylesheet href=/css/font-awesome.min.css>
<link rel=stylesheet href=/css/bulma.min.css>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','G-3WPQ6FJXBQ','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
<script src=/js/ramium.js></script>
<link rel=stylesheet href=/css/ramium.css>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3WPQ6FJXBQ"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config',"G-3WPQ6FJXBQ")</script>
</head>
<body><nav class="navbar is-dark" role=navigation aria-label="main navigation">
<div class=navbar-brand>
<a class=navbar-item href=/>
<strong>TechBlog </strong>
</a>
<a role=button class="navbar-burger burger" aria-label=menu aria-expanded=false data-target=navbarBasicExample>
<span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span>
</a>
</div>
<div id=navbarBasicExample class=navbar-menu>
<div class=navbar-start>
<a class=navbar-item href=/>ホーム</a>
<div class="navbar-item has-dropdown is-hoverable">
<a class=navbar-link>ブログ</a>
<div class=navbar-dropdown>
<a class=navbar-item href=/tags/>タグ</a>
<a class=navbar-item href=/posts/>記事</a>
</div>
</div>
</div>
<div class=navbar-end>
<a class="navbar-item navgithub" href=https://github.com/issei1213 target=_blank>
<i class="fa fa-github fa-2x"></i>
</a>
<a class="navbar-item navgithub" href=https://twitter.com/abIOELEsEfu6Os0 target=_blank>
<i class="fa brands fa-twitter fa-2x"></i>
</a>
</div>
</div>
</nav><div class="columns is-centered">
<div id=page-body class="column is-7">
<div class=content>
<h1>TypeScript</h1>
</div>
<div class=blog-brief>
<a href=/posts/typescript-exhaustive-check/>
<h3 class="title is-4">
TypeScriptで網羅性チェック
</h3>
</a>
<div class="level is-mobile details">
<div class=level-left>
<div class=level-item>
<a href=/posts/typescript-exhaustive-check/>
<p class="subtitle info date">May 31, 2024
</p>
</a>
</div>
<div class=level-item>
<a href=/posts/typescript-exhaustive-check/>
<p class="subtitle info">
9 mins read
</p>
</a>
</div>
</div>
<div class="level-right is-hidden-touch">
<a class="tag is-rounded" href=/tags/typescript>TypeScript</a>
</div>
</div>
<div>
<div>
<a href=/posts/typescript-exhaustive-check/>
<p class=summary>
背景 ソフトウェアデザインを読んでいて網羅性チェックについて知ったので、TypeScriptでの網羅性チェックについて自分なりにまとめてみた。
概要 網羅性チェックとは、全てのケースを網羅しているどうかをチェックしていることを指す。
TypeScriptは様々なケースで利用できるが、今回は文字列リテラル型を利用して網羅性チェックを行う方法をまとめていく。
本題 以下のようなコードがあるとする。
Fruit型にはapple、banana、orangeの3つの文字列リテラル型があり、checkAllFruits関数はFruit型を引数に取り、その値によって処理を分岐している。
ここではシンプルにconsole.logで出力している。
type Fruit = 'apple' | 'banana' | 'orange'; function checkAllFruits(fruit: Fruit): void { if(fruit === 'apple') { console.log('This is an apple.'); return } else if (fruit === 'banana') { console.log('This is a banana.'); return } else { console.log('This is an orange.'); return } } checkAllFruits('apple') // This is an apple. checkAllFruits('banana') // This is an banana. checkAllFruits('orange') // This is an orange.
</p>
</a>
</div>
</div>
<div class="level is-mobile continue-reading">
<div class=level-left>
</div>
<div class=level-right>
<a href=/posts/typescript-exhaustive-check/>続きを読む <i class="fa fa-angle-double-right" aria-hidden=true></i></a>
</div>
</div>
<hr>
</div><div class=blog-brief>
<a href=/posts/solidjs_types/>
<h3 class="title is-4">
Component TypesとEvent Handlers
</h3>
</a>
<div class="level is-mobile details">
<div class=level-left>
<div class=level-item>
<a href=/posts/solidjs_types/>
<p class="subtitle info date">Aug 12, 2022
</p>
</a>
</div>
<div class=level-item>
<a href=/posts/solidjs_types/>
<p class="subtitle info">
7 mins read
</p>
</a>
</div>
</div>
<div class="level-right is-hidden-touch">
<a class="tag is-rounded" href=/tags/solidjs>SolidJS</a>
<a class="tag is-rounded" href=/tags/typescript>TypeScript</a>
</div>
</div>
<div>
<div>
<a href=/posts/solidjs_types/>
<p class=summary>
背景 SolidJSのコンポーネントとイベントハンドラの型定義について悩んでいたが、公式で解説が乗っていたので、
個人的にまとめることにする。
概要 コンポーネントとイベントハンドラの型定義の方法をまとめていく。
公式ではコンポーネントの型をComponent Types、エベントハンドラの型をEvent Handlersとして記載しているので、 同一の単語を使用していく。
本題 Component Types Component import type { JSX, Component } from 'solid-js'; type Component&lt;P = {}> = (props: P) => JSX.Element; 基本的にはReactのFCと同じような使い型ができ、propsの型をジェネリクスで定義することができる。
戻り値はJSX.Elementになる。
サンプルコード　※公式のコードを参照
import { render } from "solid-js/web"; import { createSignal, Component } from "solid-js"; const Counter: Component = () => { const [count, setCount] = createSignal(0); return ( &lt;button onClick={() => setCount((c) => c+1)}> {count()} &lt;/button> ); }; const InitCounter: Component&lt;{initial: number}> = (props) => { const [count, setCount] = createSignal(props.
</p>
</a>
</div>
</div>
<div class="level is-mobile continue-reading">
<div class=level-left>
</div>
<div class=level-right>
<a href=/posts/solidjs_types/>続きを読む <i class="fa fa-angle-double-right" aria-hidden=true></i></a>
</div>
</div>
<hr>
</div><div class=blog-brief>
<a href=/posts/typescript_tip-20/>
<h3 class="title is-4">
TypeScript Tip #20
</h3>
</a>
<div class="level is-mobile details">
<div class=level-left>
<div class=level-item>
<a href=/posts/typescript_tip-20/>
<p class="subtitle info date">Apr 20, 2022
</p>
</a>
</div>
<div class=level-item>
<a href=/posts/typescript_tip-20/>
<p class="subtitle info">
8 mins read
</p>
</a>
</div>
</div>
<div class="level-right is-hidden-touch">
<a class="tag is-rounded" href=/tags/typescript>TypeScript</a>
</div>
</div>
<div>
<div>
<a href=/posts/typescript_tip-20/>
<p class=summary>
背景 今回もmattさんのTypeScriptTipsを解説していく。
TypeScript Tip #20
概要 以下のオブジェクトの型が存在している時に、特定のキーのバリューのユニオンを作成する時に使用する。
export type Obj = { a: 'a', a2: 'a2', a3: 'a3', b: 'b', b1: 'b1', b2: 'b2' } // 上記の型から以下の型を作成したい type NewUnion = "a" | "a2" | "a3" 本題 以下が実際の型定義になる。順番に解説していく。
type ValuesOfKeysStartingWithA&lt;Obj> = { [K in Extract&lt;keyof Obj, `a${string}`>]: Obj[K]; }[Extract&lt;keyof Obj, `a${string}`>] type NewUnion = ValuesOfKeysStartingWithA&lt;Obj> // type NewUnion = "a" | "a2" | "a3" 今回のポイントはExtract&lt;keyof Obj,`a${string}`>になるため細かくみていく。 まず、a${string}がどのように型定義されるかというと、文字列aを含めて文字列リテラル型を定義できる。 type TestType = `a${string}` // Success const test1: TestType = 'a' const test2: TestType = 'a1' // Error const test3: TestType = '1' // Type '"1"' is not assignable to type '`a${string}`'.
</p>
</a>
</div>
</div>
<div class="level is-mobile continue-reading">
<div class=level-left>
</div>
<div class=level-right>
<a href=/posts/typescript_tip-20/>続きを読む <i class="fa fa-angle-double-right" aria-hidden=true></i></a>
</div>
</div>
<hr>
</div><div class=blog-brief>
<a href=/posts/typescript_tip-8/>
<h3 class="title is-4">
TypeScript Tip #8
</h3>
</a>
<div class="level is-mobile details">
<div class=level-left>
<div class=level-item>
<a href=/posts/typescript_tip-8/>
<p class="subtitle info date">Apr 15, 2022
</p>
</a>
</div>
<div class=level-item>
<a href=/posts/typescript_tip-8/>
<p class="subtitle info">
5 mins read
</p>
</a>
</div>
</div>
<div class="level-right is-hidden-touch">
<a class="tag is-rounded" href=/tags/typescript>TypeScript</a>
<a class="tag is-rounded" href=/tags/react>React</a>
</div>
</div>
<div>
<div>
<a href=/posts/typescript_tip-8/>
<p class=summary>
背景 今回もmattさんのTypeScriptTipsをまとめていく。
TypeScript Tip #8
概要 Reactのジェネリクスを使用して、動的で柔軟なコンポーネントを作成することができる。
本題 以下のコードはReactのサンプルのコードである。
Tableコンポーネントのpropsに存在するitemsはオブジェクトの配列になっている。
オブジェクトはプロパティidのみを保持している。
import React from 'react' interface TableProps { items: { id: string }[] renderItem: (item: { id: string }) => React.ReactNode } export const Table = (props: TableProps) => { return null } const Component = () => { return ( &lt;Table items={[ { id: '1', } ]} renderItem={(item) => &lt;div>{ item.id }&lt;/div>} >&lt;/Table> ) } 上記の場合、propsitemsにオブジェクトのid以外のプロパティを定義したい場合、TablePropsにも追加をしてやる必要がある。 以下はそのサンプルコード
</p>
</a>
</div>
</div>
<div class="level is-mobile continue-reading">
<div class=level-left>
</div>
<div class=level-right>
<a href=/posts/typescript_tip-8/>続きを読む <i class="fa fa-angle-double-right" aria-hidden=true></i></a>
</div>
</div>
<hr>
</div><div class=blog-brief>
<a href=/posts/typescript_tip-7/>
<h3 class="title is-4">
TypeScript Tip #7
</h3>
</a>
<div class="level is-mobile details">
<div class=level-left>
<div class=level-item>
<a href=/posts/typescript_tip-7/>
<p class="subtitle info date">Apr 13, 2022
</p>
</a>
</div>
<div class=level-item>
<a href=/posts/typescript_tip-7/>
<p class="subtitle info">
6 mins read
</p>
</a>
</div>
</div>
<div class="level-right is-hidden-touch">
<a class="tag is-rounded" href=/tags/typescript>TypeScript</a>
</div>
</div>
<div>
<div>
<a href=/posts/typescript_tip-7/>
<p class=summary>
背景 今回もmattさんの記事をまとめていく。
TypeScript Tip #7
概要 オブジェクト中身を順番に処理していく時には、以下のコードを用いることがある。
const myObject = { a: 1, b: 2, c: 3 } Object.keys(myObject).forEach((key) => { console.log(myObject[key]) // Element implicitly has an 'any' type because expression of type 'string' can't be used to index type '{ a: number; b: number; c: number; }'. // No index signature with a parameter of type 'string' was found on type '{ a: number; b: number; c: number; }'.
</p>
</a>
</div>
</div>
<div class="level is-mobile continue-reading">
<div class=level-left>
</div>
<div class=level-right>
<a href=/posts/typescript_tip-7/>続きを読む <i class="fa fa-angle-double-right" aria-hidden=true></i></a>
</div>
</div>
<hr>
</div><div class=blog-brief>
<a href=/posts/typescript_tip-5/>
<h3 class="title is-4">
TypeScript Tip #5
</h3>
</a>
<div class="level is-mobile details">
<div class=level-left>
<div class=level-item>
<a href=/posts/typescript_tip-5/>
<p class="subtitle info date">Apr 10, 2022
</p>
</a>
</div>
<div class=level-item>
<a href=/posts/typescript_tip-5/>
<p class="subtitle info">
3 mins read
</p>
</a>
</div>
</div>
<div class="level-right is-hidden-touch">
<a class="tag is-rounded" href=/tags/typescript>TypeScript</a>
</div>
</div>
<div>
<div>
<a href=/posts/typescript_tip-5/>
<p class=summary>
背景 今回もmattさんの動画をまとめていく
TypeScript Tip #5
概要 型推論された型に対してextendsを使用するまとめていく。
本題 実際のサンプルコードは以下。 getDeepValue関数の引数にオブジェクトを渡して、そこから型推論をさせている。
第2引数、第3引数のオブジェクトのキーを指定して、最終的なバリューを取得できるような関数を作成する。
export const getDeepValue = &lt; Obj, FirstKey extends keyof Obj, SecondKey extends keyof Obj[FirstKey] >( obj: Obj, firstKey: FirstKey, secondKey: SecondKey ): Obj[FirstKey][SecondKey] => { return obj[firstKey][secondKey] } const obj = { foo: { a: true, b: 2 }, bar: { c: 'cool', d: 2 } } console.log(getDeepValue(obj, 'bar', 'd')) 引数の第2引数FirstKeyは型推論されたObjに制約を設けている。 FirstKey extends keyof { foo: { a: boolean; b: number; }; bar: { c: string; d: number; }; } 🔽 FirstKey extends "foo" | "bar" よって、FirstKeyはfooかbarのどちらかになる。
</p>
</a>
</div>
</div>
<div class="level is-mobile continue-reading">
<div class=level-left>
</div>
<div class=level-right>
<a href=/posts/typescript_tip-5/>続きを読む <i class="fa fa-angle-double-right" aria-hidden=true></i></a>
</div>
</div>
<hr>
</div><div class=blog-brief>
<a href=/posts/typescript_tip-3/>
<h3 class="title is-4">
TypeScript Tip #3
</h3>
</a>
<div class="level is-mobile details">
<div class=level-left>
<div class=level-item>
<a href=/posts/typescript_tip-3/>
<p class="subtitle info date">Apr 9, 2022
</p>
</a>
</div>
<div class=level-item>
<a href=/posts/typescript_tip-3/>
<p class="subtitle info">
7 mins read
</p>
</a>
</div>
</div>
<div class="level-right is-hidden-touch">
<a class="tag is-rounded" href=/tags/typescript>TypeScript</a>
</div>
</div>
<div>
<div>
<a href=/posts/typescript_tip-3/>
<p class=summary>
背景 今回もmattoさんのコードリーディングをしていく。
TypeScript Tip #3
概要 今回はTypeScriptのユーティリティをまとめたライブラリts-toolbeltについて説明していく。
注意点としては、TypeScriptバージョンが4.1以上である必要がある。 数多くのユーティリティが提供されているため、今回はMattさんの解説に絞ってまとめていく。
ts-toolbelt
本題 使い方 ライブラリの中から使用したいユーティリティをimportして使用する。
import { String, Union } from 'ts-toolbelt'; 今回はURLの操作をする時に便利なユーティリティをまとめていく。
サンプルコード import { String, Union } from 'ts-toolbelt'; const query = '/home?a=foo&b=wow' type Query = typeof query // type Query = "/home?a=foo&b=wow" type SecondQueryPart = String.Split&lt;Query, '?'>[1] // type SecondQueryPart = "a=foo&b=wow" type QueryElements = String.Split&lt;SecondQueryPart, '&'> // type QueryElements = ["a=foo", "b=wow"] type QueryParams = { [ QueryElement in QueryElements[number] ]: { [ key in String.
</p>
</a>
</div>
</div>
<div class="level is-mobile continue-reading">
<div class=level-left>
</div>
<div class=level-right>
<a href=/posts/typescript_tip-3/>続きを読む <i class="fa fa-angle-double-right" aria-hidden=true></i></a>
</div>
</div>
<hr>
</div><div class=blog-brief>
<a href=/posts/typescript_tip-2/>
<h3 class="title is-4">
TypeScript Tip #2
</h3>
</a>
<div class="level is-mobile details">
<div class=level-left>
<div class=level-item>
<a href=/posts/typescript_tip-2/>
<p class="subtitle info date">Apr 8, 2022
</p>
</a>
</div>
<div class=level-item>
<a href=/posts/typescript_tip-2/>
<p class="subtitle info">
4 mins read
</p>
</a>
</div>
</div>
<div class="level-right is-hidden-touch">
<a class="tag is-rounded" href=/tags/typescript>TypeScript</a>
</div>
</div>
<div>
<div>
<a href=/posts/typescript_tip-2/>
<p class=summary>
背景 今回もmattoさんのTypeScriptの動画をまとめていく
概要 下記の様なEntityの型を定義する。
type Entity = | { type: 'user' } | { type: 'post' } | { type: 'comment' } 上記の型の各オブジェクトにidを追加したい。その時のコードは以下になる。
typeに応じたidのプロパティを追加している。
type EntityWithId = | { type: 'user' userId: string } | { type: 'post' postId: string } | { type: 'comment' commentId: string } const result1: EntityWithId = { type: 'post', postId: '123' } const result2: EntityWithId = { type: 'user', userId: '123' } 今回はEntityWithIdの部分をインデックスシグネチャを利用して作成していく。
本題 実際のコードは以下になる。細かくみていく。
</p>
</a>
</div>
</div>
<div class="level is-mobile continue-reading">
<div class=level-left>
</div>
<div class=level-right>
<a href=/posts/typescript_tip-2/>続きを読む <i class="fa fa-angle-double-right" aria-hidden=true></i></a>
</div>
</div>
<hr>
</div><div class=blog-brief>
<a href=/posts/typescript_tip-1/>
<h3 class="title is-4">
TypeScript Tip #1
</h3>
</a>
<div class="level is-mobile details">
<div class=level-left>
<div class=level-item>
<a href=/posts/typescript_tip-1/>
<p class="subtitle info date">Apr 7, 2022
</p>
</a>
</div>
<div class=level-item>
<a href=/posts/typescript_tip-1/>
<p class="subtitle info">
6 mins read
</p>
</a>
</div>
</div>
<div class="level-right is-hidden-touch">
<a class="tag is-rounded" href=/tags/typescript>TypeScript</a>
</div>
</div>
<div>
<div>
<a href=/posts/typescript_tip-1/>
<p class=summary>
背景 前回のmattさんのTypeScript Tip #15が勉強になったので、最初から#1からまとめていく
概要 export const fruitCounts = { apple: 1, pear: 4, banana: 26 } 上記の様なコードがあった時に、特定のキーを取得する型エイリアスで定義すると以下になる。
type SingleFruitCount = | { apple: number } | { banana: number } | { pear: number } const singleFruitCount: SingleFruitCount = { apple: 10, } SingleFruitCountの型エイリアスを作成すれば、型定義できるが定数fruitCountsを型推論させて型エイリアスを作成する。
本題 最終的なコードは以下になる。具体的に解説していく。
type FruitCounts = typeof fruitCounts type NewSingleFruitCount = { [ K in keyof FruitCounts ]: { [ K2 in K ]: number } }[keyof FruitCounts] // type NewSingleFruitCount = { // apple: number; // } | { // pear: number; // } | { // banana: number; // } typeof fruitCountsは型推論が効いて以下の型が作成される。 type FruitCounts = { apple: number; pear: number; banana: number; } [ K in keyof FruitCounts ]のkeyof FruitCountsは型エイリアスのオブジェクトのキーのみを取得することができる。
</p>
</a>
</div>
</div>
<div class="level is-mobile continue-reading">
<div class=level-left>
</div>
<div class=level-right>
<a href=/posts/typescript_tip-1/>続きを読む <i class="fa fa-angle-double-right" aria-hidden=true></i></a>
</div>
</div>
<hr>
</div><div class=blog-brief>
<a href=/posts/typescript_react-sample-code-reading/>
<h3 class="title is-4">
りあクトのTypeScriptサンプルコードリーディング
</h3>
</a>
<div class="level is-mobile details">
<div class=level-left>
<div class=level-item>
<a href=/posts/typescript_react-sample-code-reading/>
<p class="subtitle info date">Apr 2, 2022
</p>
</a>
</div>
<div class=level-item>
<a href=/posts/typescript_react-sample-code-reading/>
<p class="subtitle info">
7 mins read
</p>
</a>
</div>
</div>
<div class="level-right is-hidden-touch">
<a class="tag is-rounded" href=/tags/typescript>TypeScript</a>
</div>
</div>
<div>
<div>
<a href=/posts/typescript_react-sample-code-reading/>
<p class=summary>
背景 TypeScriptの教材で以下のサンプルコードがあったので、コードリーディングしていく。
概要 以下のコードリーディングをしていく。
非同期データ取得関数をラップして、そこで起きる例外をフォローしつつ正常系と異常系に振り分ける関数を定義している。
type Result&lt;T, E extends Error> = Ok&lt;T, E> | Err&lt;T, E> export class Ok&lt;T, E extends Error> { constructor(readonly val: T) {} isOk = (): this is Ok&lt;T, E> => true isErr = (): this is Err&lt;T, E> => false } export class Err&lt;T, E extends Error> { constructor(readonly err: E) {} isOk = (): this is Ok&lt;T, E> => false isErr = (): this is Err&lt;T, E> => true } export const withResult = &lt;T, A extends any[], E extends Error>(fn: (.
</p>
</a>
</div>
</div>
<div class="level is-mobile continue-reading">
<div class=level-left>
</div>
<div class=level-right>
<a href=/posts/typescript_react-sample-code-reading/>続きを読む <i class="fa fa-angle-double-right" aria-hidden=true></i></a>
</div>
</div>
<hr>
</div>
</div>
</div>
<footer class="footer has-background-dark">
<div class="content has-text-centered has-text-white">
<p>© 2022 issei1213 All rights reserved.</p>
</div>
</footer>
</body>
</html>